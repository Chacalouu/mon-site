<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üéÅ TM PACK</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}

body{
  min-height:100vh;
  background:url("../background.jpeg") center/cover no-repeat fixed;
  color:#fff;
}

.overlay{
  min-height:100vh;
  background:rgba(0,0,0,.65);
  padding-bottom:70px;
}

/* ===== MENU ===== */
nav{
  display:flex;
  justify-content:center;
  gap:25px;
  padding:10px;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);
  position:sticky;
  top:0;
  z-index:50;
}

nav button{
  background:none;
  border:none;
  color:#fff;
  font-size:32px;
  font-weight:normal;
  cursor:pointer;
  padding:15px 14px;
}

nav button:hover{ color:#c084fc; }

/* ===== PACK ===== */
.pack-wrap{
  max-width:1200px;
  margin:35px auto;
  padding:0 16px;
  text-align:center;
}

.pack-wrap h1{
  font-size:42px;
  margin-bottom:15px;
}

#openPack{
  padding:24px 48px;
  font-size:25px;
  border:none;
  border-radius:12px;
  background: linear-gradient(145deg,#8b5cf6,#7c3aed);
  color:#fff;
  cursor:pointer;
}

#openPack:hover{ filter:brightness(1.08); }
#openPack:disabled{ opacity:.55; cursor:not-allowed; }

#remaining{
  margin-top:8px;
  opacity:.99;
  font-size:25px;
}

/* ===== PACK ROULETTE (CSGO STYLE) ===== */
#animation{
  display:none;
  margin:30px auto 0;
  width:100%;
  max-width:900px;
  overflow:hidden;
  position:relative;
}

.roulette{
  display:flex;
  gap:14px;
  will-change: transform;
}

.roulette img{
  width:140px;
  flex-shrink:0;
  border-radius:10px;
  background:rgba(255,255,255,.06);
}

.roulette-mask{
  position:relative;
  overflow:hidden;
  border-radius:16px;
  padding:18px 0;
}

.roulette-mask::after{
  content:"";
  position:absolute;
  top:0;
  bottom:0;
  left:50%;
  width:4px;
  transform:translateX(-50%);
  background:#a855f7;
  box-shadow:0 0 18px #a855f7;
  z-index:10;
}


@keyframes spin{ to{ transform:rotate(360deg); } }

/* ===== RESULT (NO EFFECTS) ===== */
#result{
  margin-top:22px;
  min-height:280px;
  display:flex;
  align-items:center;
  justify-content:center;
}

#result img{
  width:260px;
  max-width:70vw;
  border-radius:0;
  box-shadow:none;
}

/* ===== INVENTORY ===== */
.inventory{
  max-width:1300px;
  margin:35px auto 0;
  padding:0 16px;
  text-align:center;
}

.inventory h2{
  margin-bottom:6px;
  font-size:30px;
}

#progress{
  opacity:.85;
  margin-bottom:14px;
  font-size:30px;
}

#search{
  margin-bottom:30px;
  padding:10px 14px;
  width:200px;
  max-width:90%;
  border-radius:10px;
  border:none;
  outline:none;
  font-size:14px;
}

.inventory-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(88px, 1fr));
  gap:12px;
}

.inventory-grid img{
  width:100%;
  border-radius:10px;
  opacity:.3;
  transition:.2s;
  cursor:pointer;
  background:rgba(255,255,255,.06);
}

.inventory-grid img.owned{ opacity:1; }
.inventory-grid img:hover{ transform:scale(1.06); }

/* ===== CARD PREVIEW ===== */
#cardPreview{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  z-index:9999;
  align-items:center;
  justify-content:center;
}

#cardPreview img{
  max-width:90%;
  max-height:90%;
}

.nav-arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:rgba(139,92,246,.25);
  border:none;
  color:white;
  font-size:48px;
  width:64px;
  height:64px;
  border-radius:50%;
  cursor:pointer;
  transition:.2s;
  backdrop-filter: blur(6px);
}

.nav-arrow:hover{
  background:rgba(139,92,246,.5);
  transform:translateY(-50%) scale(1.1);
}

.nav-arrow.left{ left:40px; }
.nav-arrow.right{ right:40px; }

/* ===== DAILY RECAP ===== */
#dailyRecap{
  display:none;
  text-align:center;
  margin:20px auto 0;
  padding:0 16px;
}

#recapCanvas{
  width:min(700px, 92vw);
  height:auto;
  cursor:pointer;
  border-radius:14px;
}

#copyToast{
  margin-top:12px;
  opacity:0;
  transition:.25s;
  font-size:16px;
  color:#a855f7;
}

#showLeaderboard{
  padding:14px 28px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:linear-gradient(145deg,#22d3ee,#0ea5e9);
  color:#fff;
  cursor:pointer;
}

#showLeaderboard:hover{
  filter:brightness(1.1);
}

/* ===== FOOTER ===== */
.footer{
  position:fixed;
  bottom:12px;
  width:100%;
  text-align:center;
  font-size:14px;
  opacity:0.6;
  pointer-events:none;
}

/* ===== INFOS BUTTON ===== */
#infoBtn{
  position:fixed;
  top:120px;
  right:50px;
  z-index:200;
  padding:10px 18px;
  font-size:30px;
  border:none;
  border-radius:10px;
  background:linear-gradient(145deg,#f472b6,#ec4899);
  color:#fff;
  cursor:pointer;
}

#infoBtn:hover{
  filter:brightness(1.1);
}

/* ===== INFOS MODAL ===== */
#infoModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  z-index:10000;
  align-items:center;
  justify-content:center;
}

.info-box{
  background:#0b0615;
  border-radius:18px;
  max-width:720px;
  width:90%;
  padding:32px;
  text-align:center;
  position:relative;
}

.info-box h2{
  margin-bottom:14px;
  font-size:28px;
  color:#ec4899;
}

.info-box p{
  font-size:18px;
  line-height:1.5;
  opacity:.95;
}

/* close button */
#closeInfo,
#closeSupport{
  position:absolute;
  top:14px;
  right:16px;
  font-size:28px;
  background:none;
  border:none;
  color:#fff;
  cursor:pointer;
}


/* ===== SUPPORT BUTTON ===== */
#supportBtn{
  position:fixed;
  top:180px; /* juste sous Infos */
  right:50px;
  z-index:200;
  padding:10px 18px;
  font-size:26px;
  border:none;
  border-radius:10px;
  background:linear-gradient(145deg,#22d3ee,#0ea5e9);
  color:#fff;
  cursor:pointer;
}

#supportBtn:hover{
  filter:brightness(1.1);
}

/* ===== SUPPORT MODAL ===== */
#supportModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  z-index:10000;
  align-items:center;
  justify-content:center;
}

.support-link{
  display:inline-block;
  margin-top:20px;
  padding:14px 26px;
  font-size:18px;
  font-weight:bold;
  border-radius:12px;
  background:linear-gradient(145deg,#8b5cf6,#7c3aed);
  color:#fff;
  text-decoration:none;
}

.support-link:hover{
  filter:brightness(1.1);
}


/* ===== CONFETTI V2 (PREMIUM) ===== */
.confetti {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  border-radius: 2px;
  will-change: transform, opacity;
}

/* ===== DUPLICATE BADGE (OPEN PACK) ===== */
.duplicate-badge{
  position:absolute;
  top:50%;
  right:10px;
  transform:translateY(-50%);
  background:linear-gradient(145deg,#facc15,#f97316);
  color:#000;
  padding:6px 10px;
  border-radius:12px;
  font-weight:bold;
  font-size:14px;
  display:flex;
  align-items:center;
  gap:6px;
  box-shadow:0 0 12px rgba(250,204,21,.7);
}

/* ===== INVENTORY COUNT BADGE ===== */
.count-badge{
  position:absolute;
  bottom:6px;
  left:6px;
  background:#8b5cf6;
  color:#fff;
  font-size:13px;
  font-weight:bold;
  padding:4px 8px;
  border-radius:999px;
  box-shadow:0 0 10px rgba(139,92,246,.8);
}

#shareHint{
  margin-top:14px;
  font-size:16px;
  opacity:.85;
  color:#fff;
  text-align:center;
  line-height:1.4;
}
#shareHint b{ color:#a855f7; }

.sort-btn{
  padding:10px 20px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:linear-gradient(145deg,#8b5cf6,#7c3aed);
  color:#fff;
  cursor:pointer;
  margin-bottom:24px;
  transition:.2s;
}

.sort-btn:hover{
  filter:brightness(1.08);
  transform:scale(1.03);
}

</style>
</head>

<body>
<div class="overlay">

<!-- MENU -->
<nav>
  <button type="button" onclick="window.location.href='../index.html'">Home</button>
  <button type="button" onclick="window.location.href='../prog/prog.html'">Schedule</button>
  <button type="button" onclick="window.location.href='../survivor/survivor.html'">Survivor</button>
  <button type="button" onclick="window.location.href='../twenty/twenty.html'">Twenty</button>
  <button type="button" onclick="window.location.href='../rivals/index.html'">Rivals</button>
  <button type="button" onclick="window.location.href='pack.html'">TM Pack</button>
  <button type="button" onclick="window.location.href='../maps/maps.html'">My Maps</button>
  <button type="button" onclick="window.location.href='../mapping/minuteur.html'">Mapping</button>
</nav>

<button id="infoBtn">Infos</button>

<div id="infoModal">
  <div class="info-box">
    <button id="closeInfo">‚úï</button>

    <h2>Infos</h2>

    <p><strong>Welcome to TMPACK, and thanks for being here!</strong></p>

    <p>
      <strong>TMPACK</strong> is a brand-new concept created for the <strong>Trackmania community</strong>, 
      fully imagined and built from scratch by <strong>Chacalou</strong> ‚Äî including the design, cards, ratings, 
      and all visuals.
    </p>

    <p>
      I had <strong>no coding experience at first</strong>, so I started using a few tools to help me out, 
      and along the way, I learned how to code by myself.
    </p>

    <p>
      <strong>Every day, you can open 5 packs!</strong><br>
      Try to pack the best Trackmania players, your friends‚Ä¶ or even yourself üòÑ<br>
      If you want your own card, feel free to send me a <strong>DM on Discord with your trackmania.io page</strong>.
    </p>

    <p>
      ‚Üí <strong>The goal is purely for fun:</strong><br>
      Complete your collection at <strong>100%</strong>.
    </p>

    <p><strong>Special cards are linked to Trackmania events:</strong></p>

    <p>üî¥ <strong>Red cards</strong> ‚Äî Players who won <strong>5 Survivor cups or more</strong></p>
    <p>üü° <strong>Yellow cards</strong> ‚Äî Players who won <strong>10 Twenty cups or more</strong></p>
    <p>üü°‚ö´ <strong>Black and Yellow cards</strong> ‚Äî Players who won <strong>RDS Cups by Kuumba</strong></p>
    <p>üîµüî¥ <strong>Blue and Red cards</strong> ‚Äî Players who won <strong>Octogone by Ynos</strong></p>
    <p>üü¢ <strong>Green cards</strong> ‚Äî Team <strong>Les D√©gueux</strong> ‚Üí better than Nyxar</p>
    <p>‚ö™ <strong>Icon Cards</strong> ‚Äî Just me</strong> üêê</p>
    <p>üîµ <strong>Blue cards</strong> ‚Äî World Cup <strong>Champions</strong> üèÜ</p>
    <p>‚ö´ <strong>Black cards</strong> ‚Äî Tribute to the deceased</p>
    <p>üü£ <strong>Purple cards</strong> ‚Äî Streamer who support the project</p>

    <p>
      More <strong>special cards</strong> will be added for major Trackmania competitions 
      (for example: <strong>TMGames, Big Cups and more</strong>).
    </p>

    <p>
      The ratings were made by <strong>myself and the community</strong>.<br>
      Everything is meant to be taken <strong>lightly</strong> ‚Äî leave your ego aside üòå<br>
      You‚Äôll also find a few <strong>private jokes</strong> and <strong>Easter eggs</strong> hidden here and there.
    </p>

    <p>
      <strong>I hope you‚Äôll enjoy the project.</strong><br>
      See you on stream ‚Äî <strong>much love üíú</strong>
    </p>

  </div>
</div>

<button id="supportBtn">Support</button>

<div id="supportModal">
  <div class="info-box">
    <button id="closeSupport">‚úï</button>

    <h2>Support</h2>

    <p><strong>Thank you so much for the insane support around the TM Pack project.</strong></p>  
<p> I honestly never expected such a success, and seeing so many people enjoy it means more to me than you can imagine.</p>

<p><strong>The site is now finally hosted by Vinrobot ‚Äî the GOAT üêê.</strong>  
Thanks to him, the project is more stable and can keep growing properly.</p>

<p>If you enjoy TM Pack and want to support the project, you can do so.  </>

<p><strong>You are absolutely incredible.</strong>  
TM Pack may have started with me, but <strong>you are the ones making it better every single day</strong> ‚ù§Ô∏è</p>

<p> <strong>List of all supporters : </strong>
 LordOozik, Tekky, Ben, Nikku, Nastibe üíú</p>

    <a
      href="https://streamlabs.com/chacalouu/tip"
      target="_blank"
      class="support-link"
    >
      Support the project
    </a>

  </div>
</div>


<div class="pack-wrap">
  <button id="openPack">Open</button>
  <div id="remaining"></div>

 <div id="animation">
  <div class="roulette-mask">
    <div class="roulette" id="roulette"></div>
  </div>
  <div style="margin-top:10px;opacity:.85">Opening pack...</div>
</div>

  <div id="result"></div>
</div>

<!-- DAILY RECAP -->
<div id="dailyRecap">
  <canvas id="recapCanvas" width="1200" height="1200"></canvas>
<div id="shareHint">
  Click on the image to copy it!<br>
  Feel free to share it on Discord in <b>#my-daily-pack</b>
</div>
  <div id="copyToast">Image copied ‚úî</div>
</div>

<div class="inventory">
<div style="margin-bottom:14px;">
  <button id="showLeaderboard" onclick="window.location.href='tmpackldb.html'">
    Show the full leaderboard
  </button>
</div>

  <h2>This is your inventory</h2>
  <div id="progress"></div>

  <input id="search" type="text" placeholder="Search player...">
<div style="margin-bottom:18px;">
  <label style="cursor:pointer; font-size:16px;">
    <input type="checkbox" id="ownedOnly" checked style="margin-right:8px;">

    Show owned cards only
  </label>
</div>

<button class="sort-btn" onclick="sortInventoryByRating()">
  Sort by rating ‚≠ê
</button>

  <div class="inventory-grid" id="inventory"></div>
</div>

<footer class="footer">
  Chacalou.com ¬©
</footer>

</div>

<!-- CARD PREVIEW -->
<div id="cardPreview">
  <button class="nav-arrow left">‚ùÆ</button>
  <img id="cardPreviewImg">
  <button class="nav-arrow right">‚ùØ</button>
</div>

<script>
/* ========= CONFIG ========= */
const MAX_PACKS_PER_DAY = 5;
const BONUS_PACKS = 0;
const BONUS_FLAG_KEY = "chacalou_bonus_20packs_v1";

/* üî¥ PUT YOUR FULL LIST HERE */
const PACK_IMAGES = [
"7VEN1.png",
"AAPRIL1.png",
"ABADPCGAMER1.png",
"ACIDE1.png",
"ACKSTER1.png",
"ACROSE1.png",
"AFFI1.png",
"AIKO1.png",
"AIMANT1.png",
"AIRWAM1.png",
"AKUL1.png",
"ALANCOMMEUNAIGLE1.png",
"ALEXW1.png",
"ALFADREAM1.png",
"ALPHAA1.png",
"ALXSHAER1.png",
"AMATERASU1.png",
"AMONGUS1.png",
"ANDY1.png",
"ANDYBAGUETTE1.png",
"ANIGE1.png",
"AQLX1.png",
"AQUARIUMMM1.png",
"ARNE1.png",
"ARNOUDDDD1.png",
"ARSENIC1.png",
"ARTHANIIR1.png",
"ARTISSE1.png",
"ASPECT1.png",
"ASSE1.png",
"ASTALET1.png",
"ASTRONAUT1.png",
"ATALATA1.png",
"ATOME1.png",
"AUREL1.png",
"AURIS1.png",
"AUTHORTIME1.png",
"AUWRAH1.png",
"AWAYFRIDISH1.png",
"AYAKO1.png",
"AYNYX1.png",
"AYPLEX1.png",
"AZION1.png",
"BAANZ1.png",
"BABZIFY1.png",
"BADLULU1.png",
"BAIWACK1.png",
"BANANO1.png",
"BANDJ1.png",
"BANDJ2.png",
"BARBOS1.png",
"BAUPRO1.png",
"BAYRON1.png",
"BEAD1.png",
"BEETWINN1.png",
"BELETTE1.png",
"BEPEZE1.png",
"BERGIE1.png",
"BERGIE2.png",
"BERREE1.png",
"BESTIE1.png",
"BETATOAST1.png",
"BIGHOWE1.png",
"BIMOB1.png",
"BIMY1.png",
"BINKS1.png",
"BIRDIE1.png",
"BIRDIE2.png",
"BITS1.png",
"BLACKDREAM1.png",
"BLITZ1.png",
"BLOOD1.png",
"BLUEJINX1.png",
"BMQS1.png",
"BMX1.png",
"BOBO1.png",
"BOGWARRIOR1.png",
"BOLET1.png",
"BOLET2.png",
"BORIS1.png",
"BOSHBISH1.png",
"BOZBEZ1.png",
"BRAKELESS1.png",
"BRANDOM1.png",
"BREN1.png",
"BREN2.png",
"BRESSO1.png",
"BRINKENN1.png",
"BROLY1.png",
"BUBULLES1.png",
"BURNTBAGELS1.png",
"BVDDY1.png",
"CACACUP.png",
"CANNON1.png",
"CAP1.png",
"CARELESSCOBRA1.png",
"CARLJR1.png",
"CARLJR2.png",
"CATBAGASM1.png",
"CATCURLYFRIES1.png",
"CEMKO1.png",
"CFIL1.png",
"CHACALOU1.png",
"CHACALOU2.png",
"CHACALOU3.png",
"CHAMOW1.png",
"CHARKIE1.png",
"CHARLES1.png",
"CHAYANN1.png",
"CHAYANN2.png",
"CHBIDOU1.png",
"CHOCOLOCO1.png",
"CHOUM1.png",
"CHROMA1.png",
"CHUCKY1.png",
"CHTIWID1.png",
"CINN1.png",
"CINXSSS1.png",
"CIREMYXX1.png",
"CJAY1.png",
"CLM1.png",
"COCOW1.png",
"CONSPIRIA1.png",
"COMPLEX1.png",
"COOB1.png",
"COOLGAMERFELLA1.png",
"COSMOS1.png",
"COZ1.png",
"COZZER1.png",
"CPTSALMON1.png",
"CRISZANE1.png",
"CROSSHAIRS1.png",
"CRUZIAL1.png",
"CRXLY1.png",
"DAGOS1.png",
"DAKHAA1.png",
"DAM1.png",
"DAMPOULETO1.png",
"DANIII1.png",
"DANIKB1.png",
"DANNY1.png",
"DANTAFASS1.png",
"DANYY1.png",
"DARK621.png",
"DARK622.png",
"DARKER1.png",
"DARKESTSENTINEL1.png",
"DARKLIGHT1.png",
"DAZZLE1.png",
"DAZZLEALEC1.png",
"DEADEYE1.png",
"DEFAULT1.png",
"DEGSTM1.png",
"DELULUNA1.png",
"DEMOTIVATOR1.png",
"DENNISS1.png",
"DEROLT1.png",
"DESKA1.png",
"DEXTER1.png",
"DEXXY1.png",
"DEZII1.png",
"DIONYSOS1.png",
"DISTURBEDSPACE1.png",
"DJS1.png",
"DOFAULT1.png",
"DOWN1.png",
"DOYLE1.png",
"DRARKER1.png",
"DROLE2CON1.png",
"DUBBY1.png",
"DUMMY1.png",
"DUNSTE1.png",
"DUSK1.png",
"DYDY1.png",
"EATIFY1.png",
"EFFECT1.png",
"EGER1.png",
"EGGY1.png",
"ELCONN1.png",
"ELIXIR1.png",
"ELTONBRAWL1.png",
"EMILIEN1.png",
"ENDER1.png",
"ENER1.png",
"ENIBETI1.png",
"ENLIGHTENMENT1.png",
"EPOS1.png",
"ERIA1.png",
"ERIA2.png",
"ERIZEL1.png",
"EROM1.png",
"EVON1.png",
"EXISTENZMINIMUM1.png",
"EXTRALIGANT1.png",
"F6T1.png",
"FAQEZ1.png",
"FATINHO1.png",
"FATINHO2.png",
"FAYEUR1.png",
"FEED1.png",
"FEGIR1.png",
"FENRIRC1371.png",
"FIFFOUS1.png",
"FIORTEN1.png",
"FLOW1.png",
"FLUEWEIN1.png",
"FLYNN1.png",
"FONTUR1.png",
"FRAA1.png",
"FRANKFURT1.png",
"FRANKTHEHAMSTER1.png",
"FREDWOLF1.png",
"FRICKY1.png",
"FRIZZOUILLE1.png",
"FROSTBEULE1.png",
"FROSTBEULE2.png",
"GARIKUL1.png",
"GATITO1.png",
"GGEEK1.png",
"GLADAVICOM1.png",
"GLAST1.png",
"GOATMILK1.png",
"GODZ1.png",
"GOLD1.png",
"GOLDY1.png",
"GOLIO1.png",
"GRANADY1.png",
"GRANADY2.png",
"GREEVEX1.png",
"GUMOLY1.png",
"GWEN1.png",
"HABE1.png",
"HAEDRA1.png",
"HAKKIJUNIOR1.png",
"HAKKIJUNIOR2.png",
"HAYIOM1.png",
"HEADMASTERKILL1.png",
"HEATHCLIFF1.png",
"HEAV1.png",
"HEAV2.png",
"HEFEST1.png",
"HEITONE1.png",
"HELLOMARC1.png",
"HELZINKA1.png",
"HENDO1.png",
"HENKAN1.png",
"HENKISME1.png",
"HERGAM1.png",
"HIKAGERI1.png",
"HOBBIT1.png",
"HOELBI1.png",
"HOLFREAK1.png",
"HOLO1.png",
"HOPE1.png",
"HUBABIBI1.png",
"HUGO2201.png",
"HUMMBLE1.png",
"HUSO1.png",
"HUTCHY1.png",
"HYDRO1.png",
"HYGGEBIS1.png",
"HYLL1.png",
"IAMLOOBS1.png",
"IAMPD1.png",
"ICE1.png",
"ICE2.png",
"IDOLESS1.png",
"IESAUKA1.png",
"IESAUKA2.png",
"IESAUKA3.png",
"IGNITE1.png",
"IIHUGO1.png",
"IKARUS1.png",
"IKEWOLF1.png",
"IMOT1.png",
"INARI1.png",
"INS1.png",
"INSANE1.png",
"INSANITY1.png",
"INTAX1.png",
"INTELLECTRICK1.png",
"IPRIME.png",
"IRIDIUM1.png",
"ITZRYAN1.png",
"ITZYOURI1.png",
"IXAWAI1.png",
"IXXONN1.png",
"JAAKAAH1.png",
"JAJA1.png",
"JAKERAY1.png",
"JAM1.png",
"JAN1.png",
"JANDRO1.png",
"JARCRAB1.png",
"JATROVIV1.png",
"JAVE1.png",
"JAVIFLYER1.png",
"JAVZO1.png",
"JAYOTIK1.png",
"JDAWGERSON1.png",
"JDON1.png",
"JEANRENE1.png",
"JINGATAK1.png",
"JITSKY1.png",
"JOJOLEPRO1.png",
"JOKEY1.png",
"JOKER1.png",
"JOLTYSONIC1.png",
"JOLYPOP1.png",
"JOSH1.png",
"JOYMILO1.png",
"JOZO1.png",
"JSWAG1.png",
"JULIANO1.png",
"JURIX1.png",
"JUSSY1.png",
"KAKNE1.png",
"KALAMITY1.png",
"KALYSAN1.png",
"KAMA1.png",
"KAMIKALASH1.png",
"KANDZSIKA1.png",
"KANN1.png",
"KAPPA1.png",
"KAPPA2.png",
"KAPPARILEY1.png",
"KARJEN1.png",
"KARLBERG1.png",
"KARLUKKI1.png",
"KARMA1.png",
"KARMV1.png",
"KARMV2.png",
"KBABUSER1.png",
"KEBY1.png",
"KEFFIN1.png",
"KELVAWESOME1.png",
"KELVEN1.png",
"KEM1.png",
"KERBEROS1.png",
"KEY1.png",
"KEZSKIA1.png",
"KILLIAN1.png",
"KILLZERAX1.png",
"KILOU1.png",
"KIONN1.png",
"KIWIUNICORN1.png",
"KLOVNI1.png",
"KLUHTU1.png",
"KNYNTSJE1.png",
"KOBLE1.png",
"KOENZ1.png",
"KOPATYCH1.png",
"KOPRO1.png",
"KORCH1.png",
"KORNIEE1.png",
"KRISTIANO1.png",
"KRUDE1.png",
"KSKYLER1.png",
"KUDA1.png",
"KUEBELCHRIS1.png",
"KUUMBA1.png",
"KVIKK1.png",
"KWILO1.png",
"KYHUDJI1.png",
"KYLE1.png",
"LANGEMANN1.png",
"LAPEPITE1.png",
"LARS1.png",
"LATTACK1.png",
"LAURA1.png",
"LAURIDS1.png",
"LCKERBIERCHEN1.png",
"LEAF1.png",
"LEFTISFASTER1.png",
"LEGU1.png",
"LEPAING1.png",
"LETZTER1.png",
"LEVONN1.png",
"LIFFEY1.png",
"LINGO1.png",
"LINK1.png",
"LINKMAX1.png",
"LIQUID1.png",
"LIRIK1.png",
"LITRO1.png",
"LNKO1.png",
"LOKI1.png",
"LOKOGZ1.png",
"LORDQUACKED1.png",
"LOSO1.png",
"LOUMAR1.png",
"LOUPPHOK1.png",
"LOUZZIX1.png",
"LUBIAS1.png",
"LUCKERSTURBO1.png",
"LUCKYBOI1.png",
"LUDOW1.png",
"LUECES1.png",
"LUKARIO1.png",
"LUKEFAST1.png",
"LULUB1.png",
"LUMAR1.png",
"LYKER1.png",
"MACIEY1.png",
"MACROBLOKOS1.png",
"MAGEFROMAGE1.png",
"MAGORIAN1.png",
"MAJIJEJ1.png",
"MANIAAAAC1.png",
"MANOX1.png",
"MANSKIPTRUCK1.png",
"MANTAAA1.png",
"MARIINA1.png",
"MARIJNTJE1.png",
"MARIOGALAXY1.png",
"MARIUS1.png",
"MARIUS2.png",
"MARSLI1.png",
"MASSA1.png",
"MATHYPER1.png",
"MATP1.png",
"MATTOUZZ1.png",
"MAWI1.png",
"MAXTRACK1.png",
"MAXXX1.png",
"MEBE1.png",
"MELIOO1.png",
"MELLOWJA.png",
"MENTOZ1.png",
"MERICLE1.png",
"MERTZJR1.png",
"MICKA1.png",
"MICKBZH1.png",
"MICMO1.png",
"MIGGY1.png",
"MIKEYYY1.png",
"MILMY1.png",
"MIME1.png",
"MIMOJR1.png",
"MIN1.png",
"MINCEAZ1.png",
"MIQUATRO1.png",
"MISHA1.png",
"MITRA1.png",
"MIXMOD1.png",
"MKCHICKWIT1.png",
"MOBBI1.png",
"MOLLE1.png",
"MONKEY1.png",
"MOOSE1.png",
"MORHPEO1.png",
"MORIAH1.png",
"MOROVACH1.png",
"MOUTRONIS1.png",
"MTAT1.png",
"MUDDA1.png",
"MURY1.png",
"MUSH1.png",
"MYKELOFF1.png",
"MYSTERIE1.png",
"NA1VE1.png",
"NABLA1.png",
"NALAX1.png",
"NASTIBE1.png",
"NASTIBE2.png",
"NATH1.png",
"NATUSS1.png",
"NATUSSGLUTEN1.png",
"NAUU1.png",
"NAVI1.png",
"NAYKO1.png",
"NAYKO2.png",
"NAYKO3.png",
"NEAL1.png",
"NEBULA1.png",
"NEKO1.png",
"NEKOJIM1.png",
"NEODYM1.png",
"NEON1.png",
"NEURO1.png",
"NEVERMIND1.png",
"NEZIIUM.png",
"NICOB1.png",
"NICSOBY1.png",
"NIEQ1.png",
"NIKO1.png",
"NIKOLECH1.png",
"NITECH1.png",
"NITRALIS1.png",
"NITROFEINT.png",
"NIXOTICA1.png",
"NLBS1.png",
"NOAHODERSOO1.png",
"NOBY1.png",
"NOISZIA1.png",
"NORBINARUS1.png",
"NORMAN1.png",
"NORTH1.png",
"NOTDUCT1.png",
"NOTHING1.png",
"NOTTCURIOUS1.png",
"NOVA1.png",
"NOVASTXR1.png",
"NOVU1.png",
"NRGZ1.png",
"NUPRIME1.png",
"NX1.png",
"OBITO1.png",
"OLUMSY1.png",
"OMEGA1.png",
"OMNIPOTZ1.png",
"OPALE1.png",
"ORGE1.png",
"OTAAAQ1.png",
"OTAAAQ2.png",
"OXID1.png",
"OXID2.png",
"OZY1.png",
"PAARDENVECHTER1.png",
"PAC1.png",
"PAC2.png",
"PALMITOS1.png",
"PANDA1.png",
"PAPETVAUDOIS1.png",
"PAPOU1.png",
"PATROSE1.png",
"PATRYK1.png",
"PAULL1.png",
"PAULO1.png",
"PECUNIAADEST1.png",
"PEKIGENTE1.png",
"PEPITE2.png",
"PEZI1.png",
"PHEGLEY1.png",
"PHOEBE1.png",
"PIRANHA1.png",
"PIXELS1.png",
"PLASTOREX1.png",
"PLATY1.png",
"PLINK1.png",
"PLOMBZ1.png",
"POEPBOER1.png",
"POKER1.png",
"POLYCOPY1.png",
"PROPANOIA1.png",
"PROWE1.png",
"PUG1.png",
"PURPLE1.png",
"PUSZTITOPAKO1.png",
"QEZ1.png",
"QIRAJ1.png",
"QUENTIN431.png",
"QUETE1.png",
"QUIBZ1.png",
"QUINN1.png",
"RACEHANS1.png",
"RADIANCE1.png",
"RADIAXO1.png",
"RAG1.png",
"RAGNARINHO1.png",
"RAISTLIN1.png",
"RAIZO1.png",
"RAMY1.png",
"RANGO1.png",
"RASG1.png",
"RATCHET1.png",
"RAZII1.png",
"REALJUSTIN1.png",
"REDBOLT1.png",
"REVOLUTION1.png",
"RHETORIQUE1.png",
"RICHIE1.png",
"RICSO1.png",
"RIN1.png",
"RINGOA1.png",
"RINTE1.png",
"RIOLU1.png",
"ROA1.png",
"ROBBALOBB1.png",
"ROBIN1.png",
"ROLLIN1.png",
"ROLLSTUHLKAISER1.png",
"ROOK1E1.png",
"ROQUETE1.png",
"ROQUETT1.png",
"ROTAKER1.png",
"ROTREX1.png",
"ROZU1.png",
"RYCHLIK1.png",
"RYOU1.png",
"RYUHAX1.png",
"SABRE1.png",
"SABZ1.png",
"SAHTEL1.png",
"SALAMANKA1.png",
"SALTY1.png",
"SAMBERTOOTH1.png",
"SAMIFYING1.png",
"SAMMSAYS1.png",
"SAMZ1.png",
"SANDDER1.png",
"SANO1.png",
"SAPI1.png",
"SARDOCHE1.png",
"SAVATY1.png",
"SAWKI1.png",
"SBEEVE1.png",
"SCARPURP1.png",
"SCHMANIOL1.png",
"SCRAPIE1.png",
"SEBI1.png",
"SELRAHC1.png",
"SENJOJO1.png",
"SERAF1.png",
"SERFAZER1.png",
"SHADENIS1.png",
"SHADOW1.png",
"SHADOW2.png",
"SHADOWWOLF1.png",
"SHARK1.png",
"SHARKYN1.png",
"SHCR1.png",
"SHEINEX1.png",
"SHEINIMI1.png",
"SHENGAR1.png",
"SHIELDBANDIT1.png",
"SHOFFY1.png",
"SHORTY1.png",
"SHORTYGRAY1.png",
"SHPLUK1.png",
"SIMO1.png",
"SIMON1.png",
"SIMPLYNICK1.png",
"SIQAA1.png",
"SIRLYSERGIUM1.png",
"SIROZE1.png",
"SKANDEAR1.png",
"SKIFREAK1.png",
"SKUEN1.png",
"SKY1.png",
"SLOWPIOU1.png",
"SLY1.png",
"SMIR1.png",
"SMITHY1.png",
"SNAPPIE1.png",
"SNATIX1.png",
"SNEAKYANNIE1.png",
"SNOW.png",
"SNOWYGHOSTT1.png",
"SOCKS1.png",
"SOFTYD1.png",
"SOLEX1.png",
"SOLIVAGANTZ.png",
"SOPHIEICE1.png",
"SOULJA1.png",
"SOXPANDA1.png",
"SPAMMIEJ1.png",
"SPAMMIEJ2.png",
"SPARK1.png",
"SPEEDSELF1.png",
"SPEEDY1.png",
"SPLOBS1.png",
"SPYDER1.png",
"SQLC1.png",
"SRK1.png",
"STEG1.png",
"STEEGHOSAURUS1.png",
"STELLARBOY1.png",
"STOKEINE1.png",
"STUFTS1.png",
"SULLY1.png",
"SUPERCARLOUF1.png",
"SUPERCARLOUF2.png",
"SUPERNOWA1.png",
"SUSUWI1.png",
"SYMPTHOME1.png",
"TAAK1.png",
"TACOS1.png",
"TALA1.png",
"TANI1.png",
"TANKROM1.png",
"TARANTU1.png",
"TARPOR1.png",
"TARPOR2.png",
"TECKSO1.png",
"TEKKY1.png",
"TELNEI1.png",
"TEUFLUM1.png",
"TEUKKA1.png",
"THEDARKWIX1.png",
"THERENOFELLA1.png",
"THIJNHD1.png",
"THOMASJEAN1.png",
"THOMBERN1.png",
"TIMMYS1.png",
"TIGU1.png",
"TIMEBREAKER1.png",
"TJALIC1.png",
"TMDISK1.png",
"TMNIXHAR1.png",
"TOMMACINO1.png",
"TOMMY1.png",
"TOMOTE1.png",
"TONA1.png",
"TOPICC1.png",
"TOPPEN1.png",
"TOTO1.png",
"TOUF1.png",
"TOXIKO1.png",
"TRAM1.png",
"TRICKY1.png",
"TRIDENT1.png",
"TRILISK1.png",
"TROULET1.png",
"TSEKO.png",
"TUDUTTUDUU1.png",
"TUNDER1.png",
"TUNIXX1.png",
"TUNIXX2.png",
"TWAY1.png",
"TWEEN1.png",
"TWELFTH1.png",
"TYLERZZ1.png",
"UJIMAA1.png",
"UNDIER1.png",
"UTAA1.png",
"UTENGLUTENGUTEN1.png",
"VAELYN1.png",
"VALADAX1.png",
"VANITY1.png",
"VEKISIS1.png",
"VELOM1.png",
"VEVOLUTION1.png",
"VIILOM1.png",
"VIINCH1.png",
"VIIPER1.png",
"VIIPER2.png",
"VIKENTIYY1.png",
"VIKENTIYY2.png",
"VINGUMMI1.png",
"VIRTUO1.png",
"VIRTUOZ1.png",
"VIXXA1.png",
"VORTAX1.png",
"VORTEX1.png",
"VORTEX2.png",
"VRINHO1.png",
"VULNERRA1.png",
"WALEGEN1.png",
"WALKINGCAT1.png",
"WALTEN1.png",
"WARL1.png",
"WAVES1.png",
"WAVES2.png",
"WAWA1.png",
"WAZYX1.png",
"WHIZZY1.png",
"WILEKNAS1.png",
"WILLOX1.png",
"WINGO1.png",
"WINKYFACE1.png",
"WIRTUAL1.png",
"WOODITBEOK1.png",
"WOOP1.png",
"WORKER1.png",
"WOSILE1.png",
"XEMLANX1.png",
"XENOGEAR1.png",
"XENOGEAR2.png",
"XERAR1.png",
"XERTOX.png",
"XERTZY1.png",
"XETINS1.png",
"XGUULL1.png",
"XIRO1.png",
"XIRO2.png",
"XJKLYS1.png",
"XSTRAB1.png",
"XTREVV1.png",
"YA1.png",
"YAMII1.png",
"YANNEX1.png",
"YASHABAD1.png",
"YEAGER1.png",
"YEIMS1.png",
"YEUS1.png",
"YEZALIAH1.png",
"YNOS1.png",
"YNOS2.png",
"YNOS3.png",
"YOURI1.png",
"YOYO1.png",
"ZBURST1.png",
"ZEDROX1.png",
"ZEEMUIS1.png",
"ZENKE1.png",
"ZENTRIAN1.png",
"ZENYY1.png",
"ZERATOR1.png",
"ZIGGY1.png",
"ZIMZALABIIM1.png",
"ZIREN1.png",
"ZODIARK1.png",
"ZOMBPIFFY1.png",
"ZYPHER1.png",
"ZYPHER2.png"
];

const CARD_RATINGS = {
  "7VEN1.png": 83,
  "AAPRIL1.png": 80,
  "ABADPCGAMER1.png": 86,
  "ACIDE1.png": 84,
  "ACKSTER1.png": 83,
  "ACROSE1.png": 89,
  "AFFI1.png": 90,
  "AIMANT1.png": 48,
  "AIRWAM1.png": 79,
  "ALANCOMMEUNAIGLE1.png": 62,
  "ALEXW1.png": 84,
  "ALFADREAM1.png": 83,
  "ALPHAA1.png": 85,
  "AMATERASU1.png": 85,
  "AMONGUS1.png": 86,
  "ANDY1.png": 86,
  "ANDYBAGUETTE1.png": 86,
  "ANIGE1.png": 82,
  "AQLX1.png": 81,
  "AQUARIUMMM1.png": 81,
  "ARNE1.png": 83,
  "ARNOUDDDD1.png": 79,
  "ARSENIC1.png": 77,
  "ARTHANIIR1.png": 82,
  "ARTISSE1.png": 84,
  "ASSE1.png": 83,
  "ASTALET1.png": 76,
  "ASTRONAUT1.png": 82,
  "ATALATA1.png": 82,
  "ATOME1.png": 70,
  "AUREL1.png": 91,
  "AURIS1.png": 82,
  "AUTHORTIME1.png": 83,
  "AUWRAH1.png": 78,
  "AWAYFRIDISH1.png": 86,
  "AYAKO1.png": 81,
  "AYNYX1.png": 82,
  "AYPLEX1.png": 80,
  "AZION1.png": 87,
  "BAANZ1.png": 71,
  "BABZIFY1.png": 85,
  "BADLULU1.png": 83,
  "BAIWACK1.png": 88,
  "BANANO1.png": 74,
  "BANDJ1.png": 84,
  "BANDJ2.png": 86,
  "BARBOS1.png": 86,
  "BAUPRO1.png": 84,
  "BAYRON1.png": 82,
  "BEAD1.png": 86,
  "BEETWINN1.png": 76,
  "BELETTE1.png": 69,
  "BEPEZE1.png": 87,
  "BERGIE1.png": 89,
  "BERGIE2.png": 95,
  "BERREE1.png": 82,
  "BESTIE1.png": 87,
  "BETATOAST1.png": 85,
  "BIGHOWE1.png": 79,
  "BIMOB1.png": 63,
  "BIMY1.png": 86,
  "BINKS1.png": 91,
  "BIRDIE1.png": 87,
  "BIRDIE2.png" : 89,
  "BITS1.png": 86,
  "BLACKDREAM1.png": 71,
  "BLITZ1.png": 78,
  "BLOOD1.png": 82,
  "BLUEJINX1.png": 81,
  "BMQS1.png": 87,
  "BMX1.png": 80,
  "BOBO1.png": 85,
  "BOGWARRIOR1.png": 84,
  "BOLET1.png": 82,
  "BOLET2.png" : 84,
  "BORIS1.png": 81,
  "BOZBEZ1.png": 87,
  "BRAKELESS1.png": 76,
  "BRANDOM1.png": 84,
  "BREN1.png": 94,
  "BREN2.png" : 95,
  "BRESSO1.png": 85,
  "BRINKENN1.png": 87,
  "BROLY1.png": 84,
  "BUBULLES1.png": 81,
  "BURNTBAGELS1.png": 85,
  "BVDDY1.png": 83,
  "CACACUP.png": 49,
  "CANNON1.png": 80,
  "CAP1.png": 89,
  "CARELESSCOBRA1.png": 85,
  "CARLJR1.png": 95,
  "CARLJR2.png" : 98,
  "CATBAGASM1.png": 84,
  "CATCURLYFRIES1.png": 80,
  "CEMKO1.png": 82,
  "CHACALOU1.png": 74,
  "CHACALOU2.png" : 76,
  "CHACALOU3.png" : 97,
  "CHAMOW1.png": 85,
  "CHARKIE1.png": 82,
  "CHARLES1.png": 86,
  "CHAYANN1.png": 75,
  "CHAYANN2.png" : 77,
  "CHBIDOU1.png": 68,
  "CHOCOLOCO1.png": 72,
  "CHOUM1.png": 80,
  "CHROMA1.png": 88,
  "CHTIWID1.png": 62,
  "CHUCKY1.png": 65,
  "CINN1.png": 85,
  "CINXSSS1.png": 86,
  "CIREMYXX1.png": 75,
  "CJAY1.png": 84,
  "CLM1.png": 80,
  "COCOW1.png": 87,
  "COMPLEX1.png": 88,
  "CONSPIRIA1.png": 81,
  "COOB1.png": 82,
  "COOLGAMERFELLA1.png": 75,
  "COSMOS1.png": 81,
  "COZ1.png": 79,
  "COZZER1.png": 91,
  "CPTSALMON1.png": 85,
  "CRISZANE1.png": 85,
  "CROSSHAIRS1.png": 84,
  "CRUZIAL1.png": 86,
  "CRXLY1.png": 82,
  "DAGOS1.png": 68,
  "DAKHAA1.png": 76,
  "DAM1.png": 84,
  "DAMPOULETO1.png": 84,
  "DANIKB1.png": 86,
  "DANNY1.png": 72,
  "DANTAFASS1.png": 70,
  "DANYY1.png": 80,
  "DARK621.png": 84,
  "DARKER1.png": 79,
  "DARKESTSENTINEL1.png": 87,
  "DARKLIGHT1.png": 85,
  "DAZZLE1.png": 83,
  "DEFAULT1.png": 84,
  "DEGSTM1.png": 82,
  "DELULUNA1.png": 88,
  "DEMOTIVATOR1.png": 83,
  "DENNISS1.png": 89,
  "DEROLT1.png": 84,
  "DESKA1.png": 84,
  "DEXTER1.png": 87,
  "DEZII1.png": 80,
  "DIONYSOS1.png": 84,
  "DISTURBEDSPACE1.png": 74,
  "DOFAULT1.png": 88,
  "DOWN1.png": 88,
  "DOYLE1.png": 81,
  "DRARKER1.png": 72,
  "DROLE2CON1.png": 81,
  "DUBBY1.png": 84,
  "DUMMY1.png": 85,
  "DUNSTE1.png": 83,
  "DUSK1.png": 78,
  "DYDY1.png": 80,
  "EATIFY1.png": 82,
  "EFFECT1.png": 69,
  "EGER1.png": 85,
  "EGGY1.png": 81,
  "ELCONN1.png": 93,
  "ELIXIR1.png": 75,
  "ELTONBRAWL1.png": 79,
  "EMILIEN1.png": 69,
  "ENDER1.png": 88,
  "ENER1.png": 85,
  "ENIBETI1.png": 85,
  "ENLIGHTENMENT1.png": 1,
  "EPOS1.png": 93,
  "ERIA1.png": 89,
  "ERIA2.png" : 90,
  "ERIZEL1.png": 86,
  "EROM1.png": 70,
  "EVON1.png": 88,
  "EXTRALIGANT1.png": 74,
  "F6T1.png": 86,
  "FAQEZ1.png": 83,
  "FATINHO1.png": 82,
  "FATINHO2.png" : 84,
  "FAYEUR1.png": 79,
  "FEED1.png": 87,
  "FEGIR1.png": 82,
  "FENRIRC1371.png": 81,
  "FIFFOUS1.png": 78,
  "FLOW1.png": 78,
  "FLUEWEIN1.png": 87,
  "FLYNN1.png": 66,
  "FONTUR1.png": 80,
  "FRAA1.png": 73,
  "FRANKFURT1.png": 82,
  "FRANKTHEHAMSTER1.png": 83,
  "FREDWOLF1.png": 88,
  "FRICKY1.png": 79,
  "FRIZZOUILLE1.png": 80,
  "FROSTBEULE1.png": 88,
  "FROSTBEULE2.png" : 95,
  "GARIKUL1.png": 87,
  "GATITO1.png": 88,
  "GGEEK1.png": 80,
  "GLADAVICOM1.png": 82,
  "GLAST1.png": 88,
  "GODZ1.png": 80,
  "GOLD1.png": 78,
  "GOLDY1.png": 83,
  "GRANADY1.png": 94,
  "GRANADY2.png" : 96,
  "GREEVEX1.png": 81,
  "GUMOLY1.png": 83,
  "GWEN1.png": 92,
  "HABE1.png": 89,
  "HAEDRA1.png": 85,
  "HAKKIJUNIOR1.png": 88,
  "HAKKIJUNIOR2.png" : 95,
  "HAYIOM1.png": 83,
  "HEADMASTERKILL1.png": 80,
  "HEATHCLIFF1.png": 75,
  "HEAV1.png": 88,
  "HEFEST1.png": 90,
  "HEITONE1.png": 81,
  "HELLOMARC1.png": 80,
  "HELZINKA1.png": 75,
  "HENDO1.png": 87,
  "HENKAN1.png": 72,
  "HENKISME1.png": 81,
  "HERGAM1.png": 83,
  "HIKAGERI1.png": 80,
  "HOBBIT1.png": 84,
  "HOELBI1.png": 84,
  "HOLFREAK1.png": 81,
  "HOLO1.png": 88,
  "HOPE1.png": 83,
  "HUBABIBI1.png": 86,
  "HUGO2201.png": 83,
  "HUMMBLE1.png": 79,
  "HUSO1.png": 85,
  "HYDRO1.png": 85,
  "HYGGEBIS1.png": 83,
  "HYLL1.png": 88,
  "IAMLOOBS1.png": 76,
  "IAMPD1.png": 85,
  "ICE1.png": 85,
  "ICE2.png" : 86,
  "IDOLESS1.png": 85,
  "IESAUKA1.png": 79,
  "IESAUKA2.png" : 81,
  "IESAUKA3.png" : 80,
  "IGNITE1.png": 86,
  "IIHUGO1.png": 82,
  "IKARUS1.png": 86,
  "IKEWOLF1.png": 88,
  "IMOT1.png": 87,
  "INARI1.png": 76,
  "INS1.png": 86,
  "INSANE1.png": 86,
  "INSANITY1.png": 89,
  "INTAX1.png": 87,
  "INTELLECTRICK1.png": 86,
  "IPRIME.png": 84,
  "IRIDIUM1.png": 82,
  "ITZRYAN1.png": 87,
  "ITZYOURI1.png": 80,
  "IXAWAI1.png": 85,
  "IXXONN1.png": 84,
  "JAAKAAH1.png": 86,
  "JAJA1.png": 82,
  "JAKERAY1.png": 80,
  "JAM1.png": 78,
  "JAN1.png": 87,
  "JANDRO1.png": 85,
  "JATROVIV1.png": 79,
  "JAVE1.png": 88,
  "JAVIFLYER1.png": 88,
  "JAVZO1.png": 86,
  "JAYOTIK1.png": 77,
  "JDAWGERSON1.png": 79,
  "JDON1.png": 89,
  "JEANRENE1.png": 85,
  "JINGATAK1.png": 79,
  "JITSKY1.png": 80,
  "JOJOLEPRO1.png": 92,
  "JOKER1.png": 59,
  "JOKEY1.png": 81,
  "JOLTYSONIC1.png": 84,
  "JOLYPOP1.png": 77,
  "JOSH1.png": 87,
  "JOYMILO1.png": 83,
  "JOZO1.png": 89,
  "JSWAG1.png": 85,
  "JULIANO1.png": 82,
  "JURIX1.png": 87,
  "JUSSY1.png": 76,
  "KAKNE1.png": 87,
  "KALYSAN1.png": 80,
  "KAMA1.png": 86,
  "KAMIKALASH1.png": 63,
  "KANDZSIKA1.png": 87,
  "KANN1.png": 40,
  "KAPPA1.png": 86,
  "KAPPA2.png" : 95,
  "KAPPARILEY1.png": 87,
  "KARJEN1.png": 89,
  "KARLBERG1.png": 88,
  "KARLUKKI1.png": 80,
  "KARMA1.png": 80,
  "KARMA2.png" : 82,
  "KBABUSER1.png": 88,
  "KEBY1.png": 86,
  "KEFFIN1.png": 81,
  "KELVAWESOME1.png": 80,
  "KELVEN1.png": 86,
  "KEM1.png": 84,
  "KERBEROS1.png": 86,
  "KEY1.png": 87,
  "KEZSKIA1.png": 76,
  "KILLIAN1.png": 84,
  "KILLZERAX1.png": 64,
  "KILOU1.png": 14,
  "KIONN1.png": 72,
  "KIWIUNICORN1.png": 6,
  "KLOVNI1.png": 88,
  "KLUHTU1.png": 83,
  "KNYNTSJE1.png": 80,
  "KOBLE1.png": 65,
  "KOENZ1.png": 88,
  "KOPATYCH1.png": 85,
  "KOPRO1.png": 88,
  "KORCH1.png": 80,
  "KORNIEE1.png": 85,
  "KRISTIANO1.png": 72,
  "KRUDE1.png": 78,
  "KUDA1.png": 83,
  "KUEBELCHRIS1.png": 80,
  "KUUMBA1.png": 68,
  "KVIKK1.png": 75,
  "KWILO1.png": 78,
  "KYHUDJI1.png": 76,
  "KYLE1.png": 80,
  "LAPEPITE1.png" : 67,
  "LARS1.png": 84,
  "LATTACK1.png": 79,
  "LAURA1.png": 80,
  "LAURIDS1.png": 87,
  "LEAF1.png": 81,
  "LEGU1.png": 84,
  "LEPAING1.png": 78,
  "LETZTER1.png": 86,
  "LEVONN1.png": 89,
  "LIFFEY1.png": 85,
  "LINGO1.png": 89,
  "LINK1.png": 87,
  "LINKMAX1.png": 85,
  "LIQUID1.png": 85,
  "LIRIK1.png": 73,
  "LNKO1.png": 82,
  "LOKI1.png": 80,
  "LOKOGZ1.png": 85,
  "LORDQUACKED1.png": 82,
  "LOSO1.png": 89,
  "LOUMAR1.png": 81,
  "LOUPPHOK1.png": 87,
  "LOUZZIX1.png": 84,
  "LUCKERSTURBO1.png": 83,
  "LUCKYBOI1.png": 80,
  "LUDOW1.png": 61,
  "LUECES1.png": 84,
  "LUKARIO1.png": 84,
  "LUKEFAST1.png": 83,
  "LULUB1.png": 70,
  "LUMAR1.png": 74,
  "LYKER1.png": 85,
  "MACIEY1.png": 84,
  "MACROBLOKOS1.png": 90,
  "MAGEFROMAGE1.png": 89,
  "MAGORIAN1.png": 86,
  "MAJIJEJ1.png": 79,
  "MANIAAAAC1.png": 85,
  "MANOX1.png": 85,
  "MANSKIPTRUCK1.png": 84,
  "MANTAAA1.png": 80,
  "MARIINA1.png": 83,
  "MARIJNTJE1.png": 84,
  "MARIOGALAXY1.png": 85,
  "MARIUS1.png": 89,
  "MARIUS2.png" : 90,
  "MARSLI1.png": 87,
  "MASSA1.png": 91,
  "MATHYPER1.png": 80,
  "MATP1.png": 81,
  "MATTOUZZ1.png": 82,
  "MAWI1.png": 86,
  "MAXTRACK1.png": 81,
  "MAXXX1.png": 74,
  "MEBE1.png": 82,
  "MELIOO1.png": 86,
  "MELLOWJA.png": 80,
  "MENTOZ1.png": 82,
  "MERICLE1.png": 82,
  "MERTZJR1.png": 82,
  "MICKA1.png": 83,
  "MICKBZH1.png": 85,
  "MICMO1.png": 81,
  "MILMY1.png": 88,
  "MIME1.png": 92,
  "MIMOJR1.png": 85,
  "MIN1.png": 87,
  "MINCEAZ1.png": 85,
  "MIQUATRO1.png": 85,
  "MISHA1.png": 81,
  "MITRA1.png": 80,
  "MIXMOD1.png": 79,
  "MKCHICKWIT1.png": 82,
  "MOLLE1.png": 85,
  "MONKEY1.png": 83,
  "MOOSE1.png": 80,
  "MORHPEO1.png": 86,
  "MORIAH1.png": 88,
  "MOROVACH1.png": 88,
  "MOUTRONIS1.png": 70,
  "MTAT1.png": 87,
  "MUDDA1.png": 93,
  "MURY1.png": 88,
  "MUSH1.png": 82,
  "MYKELOFF1.png": 73,
  "MYSTERIE1.png": 84,
  "NA1VE1.png": 88,
  "NABLA1.png": 85,
  "NALAX1.png": 81,
  "NASTIBE1.png": 69,
  "NASTIBE2.png" : 71,
  "NATH1.png": 80,
  "NATUSSGLUTEN1.png": 91,
  "NAUU1.png": 86,
  "NAVI1.png": 85,
  "NAYKO1.png": 88,
  "NEAL1.png": 80,
  "NEBULA1.png": 82,
  "NEKO1.png": 88,
  "NEKOJIM1.png": 81,
  "NEODYM1.png": 82,
  "NEON1.png": 88,
  "NEURO1.png": 87,
  "NEVERMIND1.png": 85,
  "NEZIIUM.png": 83,
  "NICOB1.png": 70,
  "NICSOBY1.png": 74,
  "NIEQ1.png": 88,
  "NIKO1.png": 80,
  "NIKOLECH1.png": 87,
  "NITECH1.png": 86,
  "NITRALIS1.png": 70,
  "NITROFEINT.png": 85,
  "NIXOTICA1.png": 87,
  "NOAHODERSOO1.png": 73,
  "NOBY1.png": 82,
  "NOISZIA1.png": 86,
  "NORBINARUS1.png": 84,
  "NORMAN1.png": 87,
  "NORTH1.png": 82,
  "NOTDUCT1.png": 79,
  "NOTHING1.png": 81,
  "NOTTCURIOUS1.png": 84,
  "NOVA1.png": 88,
  "NOVASTXR1.png": 83,
  "NOVU1.png": 88,
  "NRGZ1.png": 80,
  "NUPRIME1.png": 88,
  "NX1.png": 85,
  "OBITO1.png": 85,
  "OLUMSY1.png": 78,
  "OMEGA1.png": 84,
  "OMNIPOTZ1.png": 85,
  "OPALE1.png": 86,
  "ORGE1.png": 64,
  "OTAAAQ1.png": 93,
  "OTAAAQ2.png" : 95,
  "OXID1.png": 85,
  "OZY1.png": 80,
  "PAARDENVECHTER1.png": 85,
  "PAC1.png": 94,
  "PAC2.png" : 96,
  "PALMITOS1.png": 72,
  "PANDA1.png": 86,
  "PAPETVAUDOIS1.png": 61,
  "PAPOU1.png": 89,
  "PATROSE1.png": 85,
  "PATRYK1.png": 73,
  "PAULL1.png": 88,
  "PAULO1.png": 64,
  "PECUNIAADEST1.png": 78,
  "PEKIGENTE1.png": 86,
  "PEPITE2.png" : 69, 
  "PEZI1.png": 80,
  "PHEGLEY1.png": 84,
  "PHOEBE1.png": 92,
  "PIRANHA1.png": 90,
  "PIXELS1.png": 85,
  "PLASTOREX1.png": 84,
  "PLATY1.png": 83,
  "PLINK1.png": 83,
  "PLOMBZ1.png": 85,
  "POEPBOER1.png": 84,
  "POKER1.png": 86,
  "POLYCOPY1.png": 67,
  "PROPANOIA1.png": 88,
  "PROWE1.png": 80,
  "PUG1.png": 85,
  "PURPLE1.png": 87,
  "PUSZTITOPAKO1.png": 90,
  "QEZ1.png": 81,
  "QIRAJ1.png": 78,
  "QUENTIN431.png": 84,
  "QUETE1.png": 90,
  "QUIBZ1.png": 88,
  "QUINN1.png": 87,
  "RACEHANS1.png": 84,
  "RADIANCE1.png": 84,
  "RADIAXO1.png": 83,
  "RAG1.png": 64,
  "RAGNARINHO1.png": 80,
  "RAISTLIN1.png": 86,
  "RAIZO1.png": 86,
  "RAMY1.png": 87,
  "RANGO1.png": 75,
  "RASG1.png": 82,
  "RATCHET1.png": 89,
  "RAZII1.png": 82,
  "REALJUSTIN1.png": 69,
  "REDBOLT1.png": 87,
  "REVOLUTION1.png": 87,
  "RHETORIQUE1.png": 73,
  "RICHIE1.png": 86,
  "RICSO1.png": 86,
  "RIN1.png": 82,
  "RINGOA1.png": 81,
  "RIOLU1.png": 89,
  "ROA1.png": 84,
  "ROBBALOBB1.png": 78,
  "ROBIN1.png": 87,
  "ROLLIN1.png": 84,
  "ROLLSTUHLKAISER1.png": 88,
  "ROOK1E1.png": 81,
  "ROQUETE1.png": 87,
  "ROQUETT1.png": 86,
  "ROTAKER1.png": 80,
  "ROTREX1.png": 87,
  "ROZU1.png": 84,
  "RYCHLIK1.png": 87,
  "RYOU1.png": 72,
  "RYUHAX1.png": 83,
  "SABRE1.png": 83,
  "SABZ1.png": 80,
  "SAHTEL1.png": 84,
  "SALAMANKA1.png": 68,
  "SALTY1.png": 82,
  "SAMBERTOOTH1.png": 82,
  "SAMIFYING1.png": 85,
  "SAMMSAYS1.png": 81,
  "SAMZ1.png": 83,
  "SANDDER1.png": 84,
  "SANO1.png": 82,
  "SAPI1.png": 83,
  "SARDOCHE1.png": 16,
  "SAVATY1.png": 53,
  "SAWKI1.png": 71,
  "SBEEVE1.png": 77,
  "SCARPURP1.png": 86,
  "SCHMANIOL1.png": 88,
  "SCRAPIE1.png": 90,
  "SEBI1.png": 87,
  "SELRAHC1.png": 66,
  "SENJOJO1.png": 73,
  "SERAF1.png": 86,
  "SERFAZER1.png": 70,
  "SHADENIS1.png": 83,
  "SHADOW1.png": 73,
  "SHADOWWOLF1.png": 75,
  "SHARK1.png": 87,
  "SHARKYN1.png": 81,
  "SHCR1.png": 88,
  "SHEINEX1.png": 86,
  "SHEINIMI1.png": 84,
  "SHENGAR1.png": 82,
  "SHIELDBANDIT1.png": 84,
  "SHOFFY1.png": 82,
  "SHORTY1.png": 87,
  "SHORTYGRAY1.png": 84,
  "SHPLUK1.png": 82,
  "SIMO1.png": 87,
  "SIMON1.png": 80,
  "SIMPLYNICK1.png": 84,
  "SIQAA1.png": 83,
  "SIROZE1.png": 84,
  "SKANDEAR1.png": 91,
  "SKIFREAK1.png": 84,
  "SKUEN1.png": 82,
  "SKY1.png": 86,
  "SLOWPIOU1.png": 74,
  "SLY1.png": 83,
  "SMITHY1.png": 85,
  "SNAPPIE1.png": 83,
  "SNATIX1.png": 80,
  "SNEAKYANNIE1.png": 69,
  "SNOW.png": 81,
  "SOCKS1.png": 78,
  "SOFTYD1.png": 86,
  "SOLEX1.png": 64,
  "SOLIVAGANTZ.png": 87,
  "SOPHIEICE1.png": 86,
  "SOULJA1.png": 86,
  "SOXPANDA1.png": 80,
  "SPAMMIEJ1.png": 92,
  "SPAMMIEJ2.png" : 95,
  "SPARK1.png": 80,
  "SPEEDSELF1.png": 83,
  "SPEEDY1.png": 83,
  "SPLOBS1.png": 78,
  "SPYDER1.png": 83,
  "SQLC1.png": 89,
  "SRK1.png": 83,
  "STEG1.png": 78,
  "STEEGHOSAURUS1.png": 83,
  "STELLARBOY1.png": 81,
  "STOKEINE1.png": 75,
  "STUFTS1.png": 84,
  "SULLY1.png": 81,
  "SUPERCARLOUF1.png": 87,
  "SUPERCARLOUF2.png" : 95,
  "SUPERNOWA1.png": 81,
  "SUSUWI1.png": 83,
  "SYMPTHOME1.png": 79,
  "TAAK1.png": 81,
  "TACOS1.png": 84,
  "TALA1.png": 81,
  "TANI1.png": 80,
  "TANKROM1.png": 84,
  "TARPOR1.png": 87,
  "TARPOR2.png" : 89,
  "TECKSO1.png": 82,
  "TEKKY1.png": 85,
  "TELNEI1.png": 78,
  "TEUFLUM1.png": 88,
  "TEUKKA1.png": 83,
  "THEDARKWIX1.png": 81,
  "THERENOFELLA1.png": 82,
  "THIJNHD1.png": 84,
  "THOMASJEAN1.png": 83,
  "THOMBERN1.png": 84,
  "TIMMYS1.png": 80,
  "TJALIC1.png": 87,
  "TMDISK1.png": 86,
  "TOMMACINO1.png": 73,
  "TOMMY1.png": 84,
  "TOMOTE1.png": 70,
  "TONA1.png": 84,
  "TOPICC1.png": 81,
  "TOPPEN1.png": 70,
  "TOTO1.png": 81,
  "TOUF1.png": 90,
  "TOXIKO1.png": 82,
  "TRAM1.png": 84,
  "TRICKY1.png": 84,
  "TRIDENT1.png": 84,
  "TRILISK1.png": 81,
  "TROULET1.png": 78,
  "TSEKO.png": 72,
  "TUDUTTUDUU1.png": 84,
  "TUNDER1.png": 82,
  "TUNIXX1.png": 84,
  "TUNIXX2.png" : 85,
  "TWEEN1.png": 88,
  "TYLERZZ1.png": 37,
  "UJIMAA1.png": 80,
  "UNDIER1.png": 82,
  "UTAA1.png": 81,
  "VAELYN1.png": 71,
  "VALADAX1.png": 71,
  "VANITY1.png": 82,
  "VEKISIS1.png": 84,
  "VELOM1.png": 75,
  "VEVOLUTION1.png": 70,
  "VIILOM1.png": 78,
  "VIINCH1.png": 85,
  "VIIPER1.png": 86,
  "VIIPER2.png" : 88,
  "VIKENTIYY1.png": 80,
  "VIKENTIYY2.png" : 82,
  "VINGUMMI1.png": 83,
  "VIRTUO1.png": 83,
  "VIRTUOZ1.png": 72,
  "VIXXA1.png": 87,
  "VORTAX1.png": 86,
  "VORTEX1.png": 86,
  "VORTEX2.png" : 88,
  "VRINHO1.png": 85,
  "VULNERRA1.png": 82,
  "WALEGEN1.png": 85,
  "WALTEN1.png": 85,
  "WARL1.png": 84,
  "WAVES1.png": 81,
  "WAVES2.png" : 83,
  "WAWA1.png": 81,
  "WAZYX1.png": 82,
  "WHIZZY1.png": 87,
  "WILLOX1.png": 83,
  "WILEKNAS1.png": 79,
  "WINGO1.png": 85,
  "WINKYFACE1.png": 80,
  "WIRTUAL1.png": 34,
  "WOOP1.png": 85,
  "WORKER1.png": 86,
  "WOSILE1.png": 89,
  "XEMLANX1.png": 86,
  "XENOGEAR1.png": 87,
  "XENOGEAR2.png" : 95,
  "XERAR1.png": 84,
  "XERTOX.png": 82,
  "XERTZY1.png": 85,
  "XETINS1.png": 84,
  "XGUULL1.png": 80,
  "XIRO1.png": 83,
  "XIRO2.png" : 85,
  "XSTRAB1.png": 70,
  "XTREVV1.png": 80,
  "YA1.png": 78,
  "YAMII1.png": 86,
  "YANNEX1.png": 87,
  "YASHABAD1.png": 86,
  "YEAGER1.png": 72,
  "YEIMS1.png": 85,
  "YEUS1.png": 72,
  "YEZALIAH1.png": 82,
  "YNOS1.png": 85,
  "YNOS2.png" : 87,
  "YNOS3.png" : 86,
  "YOURI1.png": 80,
  "YOYO1.png": 84,
  "ZBURST1.png": 84,
  "ZEDROX1.png": 84,
  "ZEEMUIS1.png": 80,
  "ZENTRIAN1.png": 87,
  "ZENYY1.png": 82,
  "ZERATOR1.png": 75,
  "ZIGGY1.png": 83,
  "ZIMZALABIIM1.png": 85,
  "ZIREN1.png": 85,
  "ZODIARK1.png": 86,
  "ZOMBPIFFY1.png": 76,
  "ZYPHER1.png": 87,
  "ZYPHER2.png" : 89
};

/* ========= DOM ========= */
const openBtn = document.getElementById("openPack");
const remainingTxt = document.getElementById("remaining");
const animationEl = document.getElementById("animation");
const countdownEl = document.getElementById("countdown");
const resultDiv = document.getElementById("result");
const inventoryDiv = document.getElementById("inventory");
const progressTxt = document.getElementById("progress");
const searchInput = document.getElementById("search");
const cardPreview = document.getElementById("cardPreview");
const cardPreviewImg = document.getElementById("cardPreviewImg");

const dailyRecapWrap = document.getElementById("dailyRecap");
const recapCanvas = document.getElementById("recapCanvas");
const copyToast = document.getElementById("copyToast");
const ownedOnlyCheckbox = document.getElementById("ownedOnly");

let currentPreviewIndex = 0;
let currentPreviewList = [];

/* ========= STORAGE ========= */
function todayKey(){
  const now = new Date();
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, "0");
  const day = String(now.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}

function loadData(){
  const raw = localStorage.getItem("chacalou_pack_final");
  const fresh = { date: todayKey(), remaining: MAX_PACKS_PER_DAY, owned: [], todayPacks: [] };

  if(!raw) return fresh;

  try{
    const d = JSON.parse(raw);

    // Nouveau jour => on reset remaining + todayPacks, mais on garde owned
    if(d.date !== todayKey()){
      return {
        date: todayKey(),
        remaining: MAX_PACKS_PER_DAY,
        owned: Array.isArray(d.owned) ? d.owned : [],
        todayPacks: []
      };
    }

    return {
      date: d.date || todayKey(),
      remaining: Number.isFinite(d.remaining) ? d.remaining : MAX_PACKS_PER_DAY,
      owned: Array.isArray(d.owned) ? d.owned : [],
      todayPacks: Array.isArray(d.todayPacks) ? d.todayPacks : []
    };
  }catch{
    return fresh;
  }
}

let data = loadData();

function saveData(){
  localStorage.setItem("chacalou_pack_final", JSON.stringify(data));
}

/* ========= BONUS ========= */
function applyGlobalBonus(){
  const bonusAlreadyGiven = localStorage.getItem(BONUS_FLAG_KEY);

  if(!bonusAlreadyGiven){
    data.remaining += BONUS_PACKS;
    localStorage.setItem(BONUS_FLAG_KEY, "true");
    saveData();
  }
}


/* ========= UI ========= */
function updateRemaining(){
  remainingTxt.textContent = `Packs remaining today: ${data.remaining}/${MAX_PACKS_PER_DAY}`;
}

function computeProgress(){
  const ownedUnique = new Set(data.owned);
  const ownedCount = [...ownedUnique].filter(x => PACK_IMAGES.includes(x)).length;
  const total = PACK_IMAGES.length;
  const percent = total ? ((ownedCount / total) * 100).toFixed(2) : "0.00";
  progressTxt.textContent = `${percent}% (${ownedCount}/${total})`;
}

function renderInventory(){
  inventoryDiv.innerHTML = "";

  const query = searchInput.value.toLowerCase();
  const ownedCounts = getOwnedCounts();
  const ownedOnly = ownedOnlyCheckbox.checked;

  for(const imgName of PACK_IMAGES){

    if(!imgName.toLowerCase().includes(query)) continue;
    if(ownedOnly && !ownedCounts[imgName]) continue;

    const wrapper = document.createElement("div");
    wrapper.style.position = "relative";

    const img = document.createElement("img");
img.src = "images/" + imgName;
img.loading = "lazy";

const rating = CARD_RATINGS[imgName] || 0;
img.dataset.rating = rating;


    if(ownedCounts[imgName]) img.classList.add("owned");

    img.onclick = () => {
  currentPreviewList = Array.from(
    document.querySelectorAll(".inventory-grid img")
  ).map(i => i.src);

  currentPreviewIndex = currentPreviewList.indexOf(img.src);
  cardPreviewImg.src = img.src;
  cardPreview.style.display = "flex";
};

    wrapper.appendChild(img);

    // üî¢ badge quantit√©
    if(ownedCounts[imgName] > 1){
      const badge = document.createElement("div");
      badge.className = "count-badge";
      badge.textContent = ownedCounts[imgName];
      wrapper.appendChild(badge);
    }

    inventoryDiv.appendChild(wrapper);
  }

  computeProgress();
}



/* ========= DAILY RECAP ========= */
function loadImage(src){
  return new Promise((resolve, reject) => {
    const i = new Image();
    i.onload = () => resolve(i);
    i.onerror = reject;
    i.src = src;
  });
}

async function generateDailyRecap(){
  if(data.todayPacks.length === 0) return;

  dailyRecapWrap.style.display = "block";

  const ctx = recapCanvas.getContext("2d");
  ctx.clearRect(0,0,recapCanvas.width,recapCanvas.height);

  document.getElementById("shareHint").style.display = "block";

  // Fond
  try{
    const bg = await loadImage("dailyfond.png");
    ctx.drawImage(bg, 0, 0, recapCanvas.width, recapCanvas.height);
  }catch{
    // fallback si dailyfond.png introuvable
    ctx.fillStyle = "#120021";
    ctx.fillRect(0,0,recapCanvas.width,recapCanvas.height);
  }

// TITRE
const titleY = 110;
ctx.textAlign = "left";
ctx.font = "900 92px Arial";

const text1 = "MY ";
const text2 = "DAILY";
const text3 = " PACK";

const totalWidth =
  ctx.measureText(text1).width +
  ctx.measureText(text2).width +
  ctx.measureText(text3).width;

let startX = recapCanvas.width / 2 - totalWidth / 2;

ctx.fillStyle = "#fff";
ctx.fillText(text1, startX, titleY);
startX += ctx.measureText(text1).width;

ctx.fillStyle = "#ff2bdc";
ctx.fillText(text2, startX, titleY);
startX += ctx.measureText(text2).width;

ctx.fillStyle = "#fff";
ctx.fillText(text3, startX, titleY);

// üî¥ RESET ICI
ctx.textAlign = "center";



  // 5 cartes (layout 3 + 2 comme ton exemple)
  const cards = data.todayPacks.slice(0,5);
  const w = 280;
  const h = Math.round(w * 1.25);
  const gap = 45;

  const topY = 170;
  const row1X = (recapCanvas.width - (w*3 + gap*2)) / 2;
  const row2X = (recapCanvas.width - (w*2 + gap*1)) / 2;

  const positions = [
    {x: row1X + (w+gap)*0, y: topY},
    {x: row1X + (w+gap)*1, y: topY},
    {x: row1X + (w+gap)*2, y: topY},
    {x: row2X + (w+gap)*0, y: topY + h + 55},
    {x: row2X + (w+gap)*1, y: topY + h + 55},
  ];

  for(let idx=0; idx<cards.length; idx++){
    try{
      const img = await loadImage("images/" + cards[idx]);
      ctx.drawImage(img, positions[idx].x, positions[idx].y, w, h);
    }catch{
      // si image carte introuvable
      ctx.fillStyle = "rgba(255,255,255,.12)";
      ctx.fillRect(positions[idx].x, positions[idx].y, w, h);
      ctx.fillStyle = "#fff";
      ctx.font = "bold 28px Arial";
      ctx.fillText("Missing", positions[idx].x + w/2, positions[idx].y + h/2);
    }
  }

  // Progress
  const ownedCount = [...new Set(data.owned)].filter(x => PACK_IMAGES.includes(x)).length;
  const total = PACK_IMAGES.length;
  const percent = total ? ((ownedCount/total)*100).toFixed(2) : "0.00";

  ctx.fillStyle = "#ffffff";
  ctx.font = "900 80px Arial";
  ctx.fillText(`${percent}% (${ownedCount}/${total})`, recapCanvas.width/2, 1045);

  // Footer
  ctx.fillStyle = "#22d3ee";
  ctx.font = "900 46px Arial";
  ctx.fillText("OPEN YOUR PACK ON CHACALOU.COM", recapCanvas.width/2, 1155);
}

async function copyCanvasToClipboard(){
  // copie image = HTTPS obligatoire + support navigateur
  if(!navigator.clipboard || typeof ClipboardItem === "undefined"){
    alert("Copy not supported here. (Need HTTPS / supported browser)");
    return;
  }

  recapCanvas.toBlob(async (blob) => {
    try{
      await navigator.clipboard.write([ new ClipboardItem({ "image/png": blob }) ]);
      copyToast.style.opacity = 1;
      setTimeout(()=>copyToast.style.opacity=0, 1400);
    }catch(e){
      alert("Copy failed (browser blocked). Try HTTPS or another browser.");
    }
  }, "image/png");
}

recapCanvas.addEventListener("click", copyCanvasToClipboard);

function getOwnedCounts(){
  const counts = {};
  for(const c of data.owned){
    counts[c] = (counts[c] || 0) + 1;
  }
  return counts;
}




function spawnConfetti(x, y, count = 50) {
  const colors = [
    "#a855f7", // violet
    "#22d3ee", // cyan
    "#f472b6", // rose
    "#fde047", // gold
    "#ffffff"
  ];

  for (let i = 0; i < count; i++) {
    const conf = document.createElement("div");
    conf.className = "confetti";

    const size = Math.random() * 6 + 4;
    conf.style.width = size + "px";
    conf.style.height = size * 0.6 + "px";
    conf.style.background =
      colors[Math.floor(Math.random() * colors.length)];

    const angle = Math.random() * Math.PI * 2;
    const velocity = Math.random() * 6 + 4;

    let vx = Math.cos(angle) * velocity;
    let vy = Math.sin(angle) * velocity - 4;

    let gravity = 0.25;
    let rotation = Math.random() * 360;
    let rotationSpeed = Math.random() * 12 - 6;

    let posX = x;
    let posY = y;

    conf.style.left = posX + "px";
    conf.style.top = posY + "px";

    document.body.appendChild(conf);

    let life = 0;
    const maxLife = 60;

    function animate() {
      life++;
      vx *= 0.98;
      vy += gravity;

      posX += vx;
      posY += vy;
      rotation += rotationSpeed;

      conf.style.transform =
        `translate(${posX - x}px, ${posY - y}px) rotate(${rotation}deg)`;

      conf.style.opacity = 1 - life / maxLife;

      if (life < maxLife) {
        requestAnimationFrame(animate);
      } else {
        conf.remove();
      }
    }

    requestAnimationFrame(animate);
  }
}




/* ========= PACK OPENING (CSGO STYLE) ========= */
let opening = false;
let pendingCard = null;
let pendingAlreadyOwned = false;

openBtn.onclick = async () => {
  if(opening) return;

  if(data.remaining <= 0){
    alert("No packs left today. Come back at midnight!");
    return;
  }

  opening = true;
  openBtn.disabled = true;
  resultDiv.innerHTML = "";
  animationEl.style.display = "block";

  const roulette = document.getElementById("roulette");
  roulette.innerHTML = "";

  // üéØ carte finale (tir√©e IMMEDIATEMENT)
pendingCard = PACK_IMAGES[Math.floor(Math.random() * PACK_IMAGES.length)];
pendingAlreadyOwned = data.owned.includes(pendingCard);

// ‚úÖ pack consomm√© AU CLIC (anti-refresh)

data.remaining--;
saveData();
updateRemaining();

// stock temporaire (pas encore r√©v√©l√©)
let pendingToCommit = pendingCard;


  /* ========= POOL ========= */
  const pool = [];
  for(let i = 0; i < 15; i++){
    pool.push(PACK_IMAGES[Math.floor(Math.random() * PACK_IMAGES.length)]);
  }
  pool.push(pendingCard);
  for(let i = 0; i < 6; i++){
    pool.push(PACK_IMAGES[Math.floor(Math.random() * PACK_IMAGES.length)]);
  }

  pool.forEach(name => {
    const img = document.createElement("img");
    img.src = "images/" + name;
    roulette.appendChild(img);
  });

  roulette.style.transition = "none";
  roulette.style.transform = "translateX(0)";
  roulette.offsetHeight;

  const cardWidth = 154;
  const finalIndex = pool.indexOf(pendingCard);
  const centerOffset =
    (roulette.parentElement.offsetWidth / 2) - (cardWidth / 2);
  const randomOffset = (Math.random() * 120) - 60;
  const translateX =
    -(finalIndex * cardWidth) + centerOffset + randomOffset;

  roulette.style.transition =
    "transform 8s cubic-bezier(0.4,0.0,0.2,1)";
  roulette.style.transform = `translateX(${translateX}px)`;

  setTimeout(() => {
    animationEl.style.display = "none";

    resultDiv.innerHTML = `
      <div style="position:relative;display:inline-block;">
        <img src="images/${pendingCard}" id="pendingCardImg">
        ${pendingAlreadyOwned ? `<div class="duplicate-badge">‚ö†Ô∏è DUPLICATE</div>` : ``}
      </div>
    `;

    updateRemaining();

// ‚úÖ REVELATION (commit r√©el)
    data.owned.push(pendingCard);
    data.todayPacks.push(pendingCard);
    saveData();
    renderInventory();

   // ‚úÖ si c'√©tait le 5√®me pack du jour ‚Üí afficher le recap apr√®s 2s
if (data.todayPacks.length === 5) {
  setTimeout(() => {
    generateDailyRecap();
  }, 2000);
}

    pendingCard = null;
    pendingAlreadyOwned = false;

    opening = false;
    openBtn.disabled = false;
  }, 8000);
};





/* ========= CLOSE PREVIEW ========= */
cardPreview.addEventListener("click", () => {
  cardPreview.style.display = "none";
  cardPreviewImg.src = "";
});

document.addEventListener("keydown", (e) => {
  if(e.key === "Escape"){
    cardPreview.style.display = "none";
    cardPreviewImg.src = "";
  }
});

/* ========= INIT ========= */
// applyGlobalBonus(); // BONUS D√âSACTIV√â
updateRemaining();
document.getElementById("shareHint").style.display = "none";

// üîí affichage owned only par d√©faut
ownedOnlyCheckbox.checked = true;

renderInventory();


searchInput.addEventListener("input", renderInventory);
ownedOnlyCheckbox.addEventListener("change", renderInventory);


// si d√©j√† termin√© aujourd‚Äôhui => afficher recap direct
if(data.remaining === 0 && data.todayPacks.length){
  generateDailyRecap();
}

/* ========= INFOS MODAL ========= */
const infoBtn = document.getElementById("infoBtn");
const infoModal = document.getElementById("infoModal");
const closeInfo = document.getElementById("closeInfo");

infoBtn.onclick = () => {
  infoModal.style.display = "flex";
};

closeInfo.onclick = () => {
  infoModal.style.display = "none";
};

infoModal.addEventListener("click", (e) => {
  if(e.target === infoModal){
    infoModal.style.display = "none";
  }
});

/* ========= SUPPORT MODAL ========= */
const supportBtn = document.getElementById("supportBtn");
const supportModal = document.getElementById("supportModal");
const closeSupport = document.getElementById("closeSupport");

supportBtn.onclick = () => {
  supportModal.style.display = "flex";
};

closeSupport.onclick = () => {
  supportModal.style.display = "none";
};

supportModal.addEventListener("click", (e) => {
  if(e.target === supportModal){
    supportModal.style.display = "none";
  }
});

function sortInventoryByRating(){
  const cards = Array.from(inventoryDiv.children);

  cards.sort((a, b) => {
    const ra = Number(a.querySelector("img").dataset.rating || 0);
    const rb = Number(b.querySelector("img").dataset.rating || 0);
    return rb - ra; // d√©croissant
  });

  inventoryDiv.innerHTML = "";
  cards.forEach(c => inventoryDiv.appendChild(c));
}

function showPreview(index){
  if(index < 0) index = currentPreviewList.length - 1;
  if(index >= currentPreviewList.length) index = 0;

  currentPreviewIndex = index;
  cardPreviewImg.src = currentPreviewList[index];
}

document.querySelector(".nav-arrow.left").onclick = (e) => {
  e.stopPropagation();
  showPreview(currentPreviewIndex - 1);
};

document.querySelector(".nav-arrow.right").onclick = (e) => {
  e.stopPropagation();
  showPreview(currentPreviewIndex + 1);
};



</script>

</body>
</html>
